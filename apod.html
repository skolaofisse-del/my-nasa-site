<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>NASA Live Connection</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0b0d17; color: white; margin: 0; text-align: center; }
        .nav-back { padding: 20px; text-align: left; }
        .nav-back a { color: #00d4ff; text-decoration: none; font-weight: bold; }
        
        .live-container { max-width: 900px; margin: 0 auto; padding: 20px; }
        .status-bar { background: #1a1d29; padding: 10px; border-radius: 10px; border: 1px solid #333; margin-bottom: 30px; display: inline-block; }
        .dot { height: 10px; width: 10px; background-color: #00ff00; border-radius: 50%; display: inline-block; margin-right: 10px; }
        
        .section { background: #11141d; border-radius: 20px; padding: 30px; margin-bottom: 30px; border: 1px solid #222; }
        img, iframe { width: 100%; border-radius: 15px; border: 1px solid #333; margin: 20px 0; }
        
        h1, h2 { color: #00d4ff; }
        p { line-height: 1.6; color: #ccc; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #00d4ff; border-radius: 50%; width: 30px; height: 30px; animation: spin 2s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div class="nav-back">
        <a href="index.html">‚Üê –ü–û–í–ï–†–ù–£–¢–ò–°–Ø –í –¶–ï–ù–¢–† –ö–ï–†–£–í–ê–ù–ù–Ø</a>
    </div>

    <div class="live-container">
        <div class="status-bar">
            <span class="dot"></span> –ü—Ä—è–º–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ api.nasa.gov
        </div>

        <h1>üõ∞ –ü—Ä—è–º–∏–π –µ—Ñ—ñ—Ä –∑ –∫–æ—Å–º–æ—Å—É</h1>

        <div class="section" id="apod-section">
            <h2>–ê—Å—Ç—Ä–æ–Ω–æ–º—ñ—á–Ω–µ —Ñ–æ—Ç–æ –¥–Ω—è (APOD)</h2>
            <div id="apod-content">
                <div class="loader"></div>
                <p>–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–≤'—è–∑–∫—É –∑ —Å–µ—Ä–≤–µ—Ä–æ–º NASA...</p>
            </div>
        </div>

        <div class="section">
            <h2>–ê—Å—Ç–µ—Ä–æ—ó–¥–Ω–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Å—å–æ–≥–æ–¥–Ω—ñ</h2>
            <div id="asteroids-content">
                <p>–ó–∞–ø–∏—Ç –¥–∞–Ω–∏—Ö –ø—Ä–æ –Ω–∞–≤–∫–æ–ª–æ–∑–µ–º–Ω—ñ –æ–±'—î–∫—Ç–∏...</p>
            </div>
        </div>
    </div>

    <script>
        const API_KEY = 'TgxykzEqFjveNMxBTcanswogAonpIRt3hTFVGdYj';

        async function getNASAData() {
            // 1. –û—Ç—Ä–∏–º—É—î–º–æ –§–æ—Ç–æ –î–Ω—è
            try {
                const apodRes = await fetch(`https://api.nasa.gov/planetary/apod?api_key=${API_KEY}`);
                const apodData = await apodRes.json();
                
                let mediaHtml = apodData.media_type === 'image' 
                    ? `<img src="${apodData.url.replace('http://', 'https://')}" alt="APOD">`
                    : `<iframe src="${apodData.url}" frameborder="0" allowfullscreen></iframe>`;

                document.getElementById('apod-content').innerHTML = `
                    <h3>${apodData.title}</h3>
                    ${mediaHtml}
                    <p style="text-align:justify">${apodData.explanation}</p>
                `;
            } catch (err) {
                document.getElementById('apod-content').innerHTML = `
                    <p style="color:#ff4444">–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è APOD. –ú–æ–∂–ª–∏–≤–æ, —Å–µ—Ä–≤–µ—Ä NASA —Ç–∏–º—á–∞—Å–æ–≤–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π.</p>
                `;
            }

            // 2. –û—Ç—Ä–∏–º—É—î–º–æ –¥–∞–Ω—ñ –ø—Ä–æ –∞—Å—Ç–µ—Ä–æ—ó–¥–∏
            try {
                const today = new Date().toISOString().split('T')[0];
                const astRes = await fetch(`https://api.nasa.gov/neo/rest/v1/feed?start_date=${today}&end_date=${today}&api_key=${API_KEY}`);
                const astData = await astRes.json();
                const count = astData.element_count;

                document.getElementById('asteroids-content').innerHTML = `
                    <div style="font-size: 1.5em; color: #ffcc00; margin: 10px 0;">
                        –°—å–æ–≥–æ–¥–Ω—ñ –∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ: <strong>${count}</strong> –∞—Å—Ç–µ—Ä–æ—ó–¥—ñ–≤ –ø–æ–±–ª–∏–∑—É –ó–µ–º–ª—ñ
                    </div>
                    <p>–î–∞–Ω—ñ –æ—Ç—Ä–∏–º–∞–Ω—ñ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É NASA NEO (Near Earth Objects).</p>
                `;
            } catch (err) {
                document.getElementById('asteroids-content').innerHTML = "<p>–ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –ø—Ä–æ –∞—Å—Ç–µ—Ä–æ—ó–¥–∏.</p>";
            }
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        getNASAData();
    </script>
</body>
</html>